
\tikzset{
  rulelabel/.style={circle,draw=black,fill=red!20,inner sep=1pt}
}

\newcommand{\aset}[2]{\ensuremath{\begin{array}{c} #1 \\[2mm] #2 \end{array}}}


\begin{tikzpicture}

\matrix (m) [column sep=30mm, row sep=10mm, node distance=1mm, nodes={anchor=center}] {


% Rule 2: General rule
\node (r2) {\aset{ \protidset{A} \cup \{ \protid{A} \} }{ \protidset{B} }};
&
% Rule 3: Example that would benefit from elimination
\node (r2t2) {
  \aset{ \{ \protidname{A}{1}, \protidname{A}{2} \} }
  { \{ \protidname{B}{1}, \protidname{B}{2} \} }
};
% Cannot apply the rule, don't know if A1 or A2 changed into A'
% &
% \node (r3t3) {\aset{ \protidset{A} \cup \{ \protidname{A}{2} \} }{ \protidset{B} }};
% \node [right=of r3t3] {\aset{ \protidset{A} \cup \{ \protidname{A}{\prime} \} }{ \protidset{B} }};
\\

% Rule 3: General rule
\node (r3t1) {\aset{ \protidset{A} \cup \{ \protid{A} \} }{ \protidset{B} }};
\node [right=of r3t1] {\aset{ \protidset{A} \cup \{ \protidname{A}{\prime} \} }{ \protidset{B} }};
&
% Rule 3: Example that would benefit from elimination
\node (r3t2) {
  \aset{ \protidset{A} \cup \{ \protidname{A}{1}, \protidname{A}{2} \} }
       { \protidset{B} \cup \{ \protidname{B}{1} \} }
};
\node [right=of r3t2] {
  \aset{ \protidset{A} \cup \{ \protidname{A}{\prime} \} }{ \protidset{B} }
};
% Cannot apply the rule, don't know if A1 or A2 changed into A'
% &
% \node (r3t3) {\aset{ \protidset{A} \cup \{ \protidname{A}{2} \} }{ \protidset{B} }};
% \node [right=of r3t3] {\aset{ \protidset{A} \cup \{ \protidname{A}{\prime} \} }{ \protidset{B} }};
\\
};

% Rule 3: make simple label
\node[rulelabel, left=of r2] {2};
\node[rulelabel, left=of r3t1] {3};


\node [yshift=2mm] at (r2.north) {\textbf{Generic Rule}};
\node [yshift=2mm] at (r2t2.north) {\textbf{Elimination Example}};

\end{tikzpicture}
